(()=>{"use strict";var e={265:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){const t={scheme:"file",language:"blade"},i={scheme:"file",language:"php"},n=new a.default(e),u=new r.ViewProvider(e);e.subscriptions.push(o.languages.registerCompletionItemProvider(t,n,"<"),o.languages.registerDocumentLinkProvider(t,n),o.languages.registerHoverProvider(t,n),o.languages.registerCompletionItemProvider(t,u,"('"),o.languages.registerCompletionItemProvider(i,u,"('"),o.languages.registerDocumentLinkProvider(t,u),o.languages.registerDocumentLinkProvider(i,u),o.commands.registerTextEditorCommand("livewire-jump.refreshViews",(t=>{(0,s.refreshViews)(e,t)})),o.commands.registerCommand("livewire-jump.goToClass",(()=>{l&&(0,c.openTarget)(l)})),o.commands.registerCommand("livewire-jump.goToView",(()=>{l&&(0,c.openTarget)(l)}))),o.window.onDidChangeActiveTextEditor((t=>{l=(0,c.refreshTargetUri)(e,t)})),l=(0,c.refreshTargetUri)(e,o.window.activeTextEditor),console.log("Livewire Jump up")},t.deactivate=function(){};const o=i(398),a=n(i(252)),r=i(753),s=i(996),c=i(594);let l},252:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(398),o=i(996);class a{static TAG_REGEX=/<\/?((?:livewire:|x-)[a-z0-9][a-z0-9-\.]*)[\s\/$>]/g;context;constructor(e){this.context=e}provideDocumentLinks(e){if(!n.workspace.getConfiguration("livewire-jump").blade.link)return[];const t=[];for(let i=0;i<e.lineCount;i++){const r=e.lineAt(i);let s;do{if(s=a.TAG_REGEX.exec(r.text),s){const i=s[1],a=(0,o.getTargetUriByTag)(this.context,i,e.uri);if(!a)continue;const c=s[0],l=s.index+c.indexOf(i),u=new n.Position(r.lineNumber,l),p=new n.Position(r.lineNumber,l+i.length);t.push(new n.DocumentLink(new n.Range(u,p),a))}}while(s)}return t}provideHover(e,t){if(!n.workspace.getConfiguration("livewire-jump").blade.hover)return null;const i=e.lineAt(t.line).text;let r;for(;null!==(r=a.TAG_REGEX.exec(i));){const i=r[1],a=r.index,s=a+i.length;if(t.character>=a&&t.character<=s){const r=new n.Range(new n.Position(t.line,a),new n.Position(t.line,s)),c=(0,o.getTargetUriByTag)(this.context,i,e.uri);if(!c)continue;if(c){const e=n.workspace.asRelativePath(c.fsPath);return new n.Hover(`Livewire Component: **${i}**\n\nPath: ${e}`,r)}}}return null}provideCompletionItems(e,t){return e.lineAt(t).text.slice(0,t.character).match(/<([a-z0-9-\.\:]*)$/i)?(0,o.getViews)(this.context).filter((e=>!!e.tag)).map((e=>{const t=e.tag??"unknown",i=new n.CompletionItem(t,n.CompletionItemKind.Snippet);return t&&(i.detail=(t.startsWith("x-")?"Blade":"Livewire")+" Component",i.insertText=new n.SnippetString(`${t} $0`),i.documentation=new n.MarkdownString(`Inserts a Livewire component: \n\n\`<${t} />\``)),i})):[]}}t.default=a},753:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ViewProvider=void 0;const n=i(398),o=i(996);class a{static VIEW_REGEX=/(?:view|layout|#\[Layout)\(['"]([^'"]*)['"]/g;context;constructor(e){this.context=e}async provideCompletionItems(e,t,i,a){return n.workspace.getConfiguration("livewire-jump").view.autocomplete&&e.lineAt(t).text.substring(0,t.character).match(/(?:view|layout|#\[Layout)\(['"][^'"]*$/)?(0,o.getViews)(this.context).filter((e=>!!e.bladePath)).map((e=>{const t=new n.CompletionItem(e.alias,n.CompletionItemKind.File);return t.detail="Laravel View",t.documentation=`View file: ${e.alias}`,t})):[]}async provideDocumentLinks(e,t){if(!n.workspace.getConfiguration("livewire-jump").view.link)return[];const i=[],r=e.getText();let s;for(;null!==(s=a.VIEW_REGEX.exec(r));){const t=s[1],a=(0,o.getTargetUriByAlias)(this.context,t,e.uri);if(a){const o=s.index+s[0].indexOf(t),r=o+t.length,c=e.positionAt(o),l=e.positionAt(r);i.push(new n.DocumentLink(new n.Range(c,l),a))}}return i}}t.ViewProvider=a},790:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pascalToKebab=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.kebabToPascal=function(e){return e.replace(/[-_\/\\]\w/g,(e=>e.charAt(0)+e.charAt(1).toUpperCase())).replace(/[-_]+/g,"").replace(/^./,(e=>e.toUpperCase()))}},594:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baseUri=function(e){if(!n.workspace.workspaceFolders)return;const t=n.workspace.workspaceFolders[0].uri;return e?t.with({path:a.posix.join(t.path,e)}):t},t.refreshTargetUri=function(e,t){if(n.commands.executeCommand("setContext","livewire-jump.hasView",!1),n.commands.executeCommand("setContext","livewire-jump.hasClass",!1),!t)return;const i=t.document.languageId,a=n.workspace.asRelativePath(t.document.uri.path,!1);if("blade"===i){const t=(0,o.getClassUriByBladePath)(e,a);return t&&n.commands.executeCommand("setContext","livewire-jump.hasClass",!0),t}if("php"===i){const t=(0,o.getBladeUriByClassPath)(e,a);return t&&n.commands.executeCommand("setContext","livewire-jump.hasView",!0),t}},t.openTarget=function(e){e?n.workspace.openTextDocument(e).then((e=>{n.window.showTextDocument(e)}),(()=>{n.window.showInformationMessage("File not found: "+e?.fsPath)})):n.window.showInformationMessage("No file found.")};const n=i(398),o=i(996),a=i(928)},996:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getViews=c,t.getViewByTag=l,t.refreshViews=async function(e,t){const i=n.workspace.getConfiguration("livewire-jump").get("view.dirs",{});s=Object.entries(i).map((([e,t])=>function(e,t){const i=e.split(/\||:/g),n=t.split("|");return{bladePath:i[0],classPath:i[1],tag:n[0],alias:n[1]}}(e,t)));const o=[];for(const e of s){const i=await g(e,t);o.push(...i)}await e.workspaceState.update(p(e),o),n.window.showInformationMessage(`Refreshed Views: ${o.length} items`)},t.getTargetUriFromView=u,t.getTargetUriByTag=function(e,t,i){const n=l(e,t);return n?u(n,i):void 0},t.getTargetUriByAlias=function(e,t,i){const n=c(e).find((e=>e.alias===t));return n?u(n,i):void 0},t.getTargetUriByClassPath=function(e,t,i){const n=c(e).find((e=>e.classPath===t));return n?u(n,i):void 0},t.getTargetUriByBladePath=function(e,t,i){const n=c(e).find((e=>e.bladePath===t));return n?u(n,i):void 0},t.getClassUriByBladePath=function(e,t){const i=c(e).find((e=>e.bladePath===t));return i&&i.classPath?(0,r.baseUri)(i.classPath):void 0},t.getBladeUriByClassPath=function(e,t){const i=c(e).find((e=>e.classPath===t));return i&&i.bladePath?(0,r.baseUri)(i.bladePath):void 0};const n=i(398),o=i(928),a=i(790),r=i(594);let s;function c(e){return e.workspaceState.get(p(e),[])}function l(e,t){return c(e).find((e=>e.tag===t))}function u(e,t){const i=n.workspace.getWorkspaceFolder(t);if(!i)return;let a;if(e.bladePath)a=e.bladePath;else{if(!e.classPath)return;a=e.classPath}return n.Uri.file(o.posix.join(i.uri.path,a))}function p(e){return`${e.extension.id}.views`}function d(e,t){return!!e.bladePath&&t===e.bladePath}function h(e,t){return!!e.classPath&&t===e.classPath}async function g(e,t){const i=[],o=n.workspace.getWorkspaceFolder(t.document.uri);return o?(i.push(...await f(e,"",o.uri)),(await w(e,"",o.uri)).forEach((e=>{for(const t of i)if(t.alias===e.alias)return void(t.classPath=e.classPath);i.push(e)})),i):i}async function f(e,t,i){const a=[];if(!e.bladePath)return a;const r=await n.workspace.fs.readDirectory(i.with({path:o.posix.join(i.path,e.bladePath,t)}));for(const[c,l]of r){const r=o.posix.join(t,c),u=o.posix.join(e.bladePath,r);if(l!==n.FileType.Directory||s.some((e=>d(e,u)))){if(l===n.FileType.File&&c.endsWith(".blade.php")){if(e.tag?.startsWith("x-")&&"index.blade.php"===c)continue;const t=r.replace(/\//g,".").replace(/\.blade\.php$/,""),i={bladePath:u,tag:e.tag?e.tag+t:void 0,alias:(e.alias??"")+t};a.push(i)}}else a.push(...await f(e,r,i))}return a}async function w(e,t,i){const r=[];if(!e.classPath)return r;const c=await n.workspace.fs.readDirectory(i.with({path:o.posix.join(i.path,e.classPath,t)}));for(const[l,u]of c){const c=o.posix.join(t,l),p=o.posix.join(e.classPath,c);if(u!==n.FileType.Directory||s.some((e=>h(e,p)))){if(u===n.FileType.File&&l.endsWith(".php")){const t=(0,a.pascalToKebab)(c.replace(/\//g,".").replace(/\.php$/,"")),i={classPath:p,tag:e.tag?e.tag+t:void 0,alias:(e.alias??"")+t};r.push(i)}}else r.push(...await w(e,c,i))}return r}},398:e=>{e.exports=require("vscode")},928:e=>{e.exports=require("path")}},t={},i=function i(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,i),a.exports}(265);module.exports=i})();
//# sourceMappingURL=extension.js.map